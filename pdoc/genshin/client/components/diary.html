<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>genshin.client.components.diary API documentation</title>
<meta name="description" content="Diary component." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>genshin.client.components.diary</code></h1>
</header>
<section id="section-intro">
<p>Diary component.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Diary component.&#34;&#34;&#34;

import datetime
import functools
import typing

from genshin import paginators, types, utility
from genshin.client import cache, routes
from genshin.client.components import base
from genshin.client.manager import managers
from genshin.models.genshin import diary as models
from genshin.utility import deprecation

__all__ = [&#34;DiaryClient&#34;]

CN_TIMEZONE = datetime.timezone(datetime.timedelta(hours=8))


class DiaryCallback(typing.Protocol):
    &#34;&#34;&#34;Callback which requires a diary page.&#34;&#34;&#34;

    async def __call__(self, page: int, /) -&gt; models.DiaryPage:
        &#34;&#34;&#34;Return a diary page.&#34;&#34;&#34;
        ...


class DiaryPaginator(paginators.PagedPaginator[models.DiaryAction]):
    &#34;&#34;&#34;Paginator for diary.&#34;&#34;&#34;

    _data: typing.Optional[models.DiaryPage]
    &#34;&#34;&#34;Metadata of the paginator&#34;&#34;&#34;

    def __init__(self, getter: DiaryCallback, *, limit: typing.Optional[int] = None) -&gt; None:
        self._get_page = getter
        self._data = None

        super().__init__(self._getter, limit=limit, page_size=100)

    async def _getter(self, page: int) -&gt; typing.Sequence[models.DiaryAction]:
        self._data = await self._get_page(page)
        return self._data.actions

    @property
    def data(self) -&gt; models.BaseDiary:
        &#34;&#34;&#34;Get data bound to the diary.

        This requires at least one page to have been fetched.
        &#34;&#34;&#34;
        if self._data is None:
            raise RuntimeError(&#34;At least one item must be fetched before data can be gotten.&#34;)

        return self._data


class StarRailDiaryCallback(typing.Protocol):
    &#34;&#34;&#34;Callback which requires a diary page.&#34;&#34;&#34;

    async def __call__(self, page: int, /) -&gt; models.StarRailDiaryPage:
        &#34;&#34;&#34;Return a diary page.&#34;&#34;&#34;
        ...


class StarRailDiaryPaginator(paginators.PagedPaginator[models.StarRailDiaryAction]):
    &#34;&#34;&#34;Paginator for diary.&#34;&#34;&#34;

    _data: typing.Optional[models.StarRailDiaryPage]
    &#34;&#34;&#34;Metadata of the paginator&#34;&#34;&#34;

    def __init__(self, getter: StarRailDiaryCallback, *, limit: typing.Optional[int] = None) -&gt; None:
        self._get_page = getter
        self._data = None

        super().__init__(self._getter, limit=limit, page_size=100)

    async def _getter(self, page: int) -&gt; typing.Sequence[models.StarRailDiaryAction]:
        self._data = await self._get_page(page)
        return self._data.actions

    @property
    def data(self) -&gt; models.BaseDiary:
        &#34;&#34;&#34;Get data bound to the diary.

        This requires at least one page to have been fetched.
        &#34;&#34;&#34;
        if self._data is None:
            raise RuntimeError(&#34;At least one item must be fetched before data can be gotten.&#34;)

        return self._data


class DiaryClient(base.BaseClient):
    &#34;&#34;&#34;Diary component.&#34;&#34;&#34;

    @managers.no_multi
    async def request_ledger(
        self,
        uid: typing.Optional[int] = None,
        *,
        game: typing.Optional[types.Game] = None,
        detail: bool = False,
        month: typing.Union[int, str, None] = None,
        lang: typing.Optional[str] = None,
        params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
        **kwargs: typing.Any,
    ) -&gt; typing.Mapping[str, typing.Any]:
        &#34;&#34;&#34;Make a request towards the ys ledger endpoint.&#34;&#34;&#34;
        # TODO: Do not separate urls?
        params = dict(params or {})

        if game is None:
            if self.default_game is None:
                raise RuntimeError(&#34;No default game set.&#34;)

            game = self.default_game

        base_url = routes.DETAIL_LEDGER_URL if detail else routes.INFO_LEDGER_URL
        url = base_url.get_url(self.region, game)

        uid = uid or await self._get_uid(game)

        if self.region == types.Region.OVERSEAS or game == types.Game.STARRAIL:
            params[&#34;uid&#34;] = uid
            params[&#34;region&#34;] = utility.recognize_server(uid, game)
        elif self.region == types.Region.CHINESE:
            params[&#34;bind_uid&#34;] = uid
            params[&#34;bind_region&#34;] = utility.recognize_server(uid, game)
        else:
            raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)
        params[&#34;month&#34;] = month or (
            datetime.datetime.now().strftime(&#34;%Y%m&#34;) if game == types.Game.STARRAIL else datetime.datetime.now().month
        )
        params[&#34;lang&#34;] = lang or self.lang

        return await self.request(url, params=params, **kwargs)

    @deprecation.deprecated(&#34;get_genshin_diary&#34;)
    async def get_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.Diary:
        &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
        return await self.get_genshin_diary(uid, month=month, lang=lang)

    async def get_genshin_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.Diary:
        &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
        game = types.Game.GENSHIN
        uid = uid or await self._get_uid(game)
        cache_key = cache.cache_key(
            &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
        )
        data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
        return models.Diary(**data)

    async def get_starrail_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.StarRailDiary:
        &#34;&#34;&#34;Get a blazer&#39;s diary with earning details for the month.&#34;&#34;&#34;
        game = types.Game.STARRAIL
        uid = uid or await self._get_uid(game)
        cache_key = cache.cache_key(
            &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
        )
        data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
        return models.StarRailDiary(**data)

    async def _get_genshin_diary_page(
        self,
        page: int,
        *,
        uid: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.DiaryPage:
        data = await self.request_ledger(
            uid,
            game=types.Game.GENSHIN,
            detail=True,
            month=month,
            lang=lang,
            params=dict(type=type, current_page=page, page_size=100),
        )
        return models.DiaryPage(**data)

    @deprecation.deprecated(&#34;genshin_diary_log&#34;)
    def diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; DiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return self.genshin_diary_log(
            uid=uid,
            limit=limit,
            type=type,
            month=month,
            lang=lang,
        )

    def genshin_diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; DiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return DiaryPaginator(
            functools.partial(
                self._get_genshin_diary_page,
                uid=uid,
                type=type,
                month=month,
                lang=lang,
            ),
            limit=limit,
        )

    async def _get_starrail_diary_page(
        self,
        page: int,
        *,
        uid: typing.Optional[int] = None,
        type: int = models.StarRailDiaryType.STELLARJADE,
        month: typing.Optional[str] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.StarRailDiaryPage:
        data = await self.request_ledger(
            uid,
            game=types.Game.STARRAIL,
            detail=True,
            month=month,
            lang=lang,
            params=dict(type=type, current_page=page, page_size=100),
        )
        return models.StarRailDiaryPage(**data)

    def starrail_diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.StarRailDiaryType.STELLARJADE,
        month: typing.Optional[str] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; StarRailDiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return StarRailDiaryPaginator(
            functools.partial(
                self._get_starrail_diary_page,
                uid=uid,
                type=type,
                month=month,
                lang=lang,
            ),
            limit=limit,
        )</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="genshin.client.components.diary.DiaryClient"><code class="flex name class">
<span>class <span class="ident">DiaryClient</span></span>
<span>(</span><span>cookies: Union[ForwardRef('http.cookies.BaseCookie[Any]'), Mapping[Any, Any], str, Sequence[Union[ForwardRef('http.cookies.BaseCookie[Any]'), Mapping[Any, Any], str]], ForwardRef(None)] = None, *, authkey: Optional[str] = None, lang: str = 'en-us', region: <a title="genshin.types.Region" href="../../types.html#genshin.types.Region">Region</a> = Region.OVERSEAS, proxy: Optional[str] = None, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, uid: Optional[int] = None, hoyolab_id: Optional[int] = None, cache: Optional[<a title="genshin.client.cache.Cache" href="../cache.html#genshin.client.cache.Cache">Cache</a>] = None, debug: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Diary component.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DiaryClient(base.BaseClient):
    &#34;&#34;&#34;Diary component.&#34;&#34;&#34;

    @managers.no_multi
    async def request_ledger(
        self,
        uid: typing.Optional[int] = None,
        *,
        game: typing.Optional[types.Game] = None,
        detail: bool = False,
        month: typing.Union[int, str, None] = None,
        lang: typing.Optional[str] = None,
        params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
        **kwargs: typing.Any,
    ) -&gt; typing.Mapping[str, typing.Any]:
        &#34;&#34;&#34;Make a request towards the ys ledger endpoint.&#34;&#34;&#34;
        # TODO: Do not separate urls?
        params = dict(params or {})

        if game is None:
            if self.default_game is None:
                raise RuntimeError(&#34;No default game set.&#34;)

            game = self.default_game

        base_url = routes.DETAIL_LEDGER_URL if detail else routes.INFO_LEDGER_URL
        url = base_url.get_url(self.region, game)

        uid = uid or await self._get_uid(game)

        if self.region == types.Region.OVERSEAS or game == types.Game.STARRAIL:
            params[&#34;uid&#34;] = uid
            params[&#34;region&#34;] = utility.recognize_server(uid, game)
        elif self.region == types.Region.CHINESE:
            params[&#34;bind_uid&#34;] = uid
            params[&#34;bind_region&#34;] = utility.recognize_server(uid, game)
        else:
            raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)
        params[&#34;month&#34;] = month or (
            datetime.datetime.now().strftime(&#34;%Y%m&#34;) if game == types.Game.STARRAIL else datetime.datetime.now().month
        )
        params[&#34;lang&#34;] = lang or self.lang

        return await self.request(url, params=params, **kwargs)

    @deprecation.deprecated(&#34;get_genshin_diary&#34;)
    async def get_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.Diary:
        &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
        return await self.get_genshin_diary(uid, month=month, lang=lang)

    async def get_genshin_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.Diary:
        &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
        game = types.Game.GENSHIN
        uid = uid or await self._get_uid(game)
        cache_key = cache.cache_key(
            &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
        )
        data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
        return models.Diary(**data)

    async def get_starrail_diary(
        self,
        uid: typing.Optional[int] = None,
        *,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.StarRailDiary:
        &#34;&#34;&#34;Get a blazer&#39;s diary with earning details for the month.&#34;&#34;&#34;
        game = types.Game.STARRAIL
        uid = uid or await self._get_uid(game)
        cache_key = cache.cache_key(
            &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
        )
        data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
        return models.StarRailDiary(**data)

    async def _get_genshin_diary_page(
        self,
        page: int,
        *,
        uid: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.DiaryPage:
        data = await self.request_ledger(
            uid,
            game=types.Game.GENSHIN,
            detail=True,
            month=month,
            lang=lang,
            params=dict(type=type, current_page=page, page_size=100),
        )
        return models.DiaryPage(**data)

    @deprecation.deprecated(&#34;genshin_diary_log&#34;)
    def diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; DiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return self.genshin_diary_log(
            uid=uid,
            limit=limit,
            type=type,
            month=month,
            lang=lang,
        )

    def genshin_diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.DiaryType.PRIMOGEMS,
        month: typing.Optional[int] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; DiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return DiaryPaginator(
            functools.partial(
                self._get_genshin_diary_page,
                uid=uid,
                type=type,
                month=month,
                lang=lang,
            ),
            limit=limit,
        )

    async def _get_starrail_diary_page(
        self,
        page: int,
        *,
        uid: typing.Optional[int] = None,
        type: int = models.StarRailDiaryType.STELLARJADE,
        month: typing.Optional[str] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.StarRailDiaryPage:
        data = await self.request_ledger(
            uid,
            game=types.Game.STARRAIL,
            detail=True,
            month=month,
            lang=lang,
            params=dict(type=type, current_page=page, page_size=100),
        )
        return models.StarRailDiaryPage(**data)

    def starrail_diary_log(
        self,
        uid: typing.Optional[int] = None,
        *,
        limit: typing.Optional[int] = None,
        type: int = models.StarRailDiaryType.STELLARJADE,
        month: typing.Optional[str] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; StarRailDiaryPaginator:
        &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
        return StarRailDiaryPaginator(
            functools.partial(
                self._get_starrail_diary_page,
                uid=uid,
                type=type,
                month=month,
                lang=lang,
            ),
            limit=limit,
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="genshin.client.components.base.BaseClient" href="base.html#genshin.client.components.base.BaseClient">BaseClient</a></li>
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="genshin.client.clients.Client" href="../clients.html#genshin.client.clients.Client">Client</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="genshin.client.components.diary.DiaryClient.logger"><code class="name">var <span class="ident">logger</span> : logging.Logger</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="genshin.client.components.diary.DiaryClient.diary_log"><code class="name flex">
<span>def <span class="ident">diary_log</span></span>(<span>self, uid: Optional[int] = None, *, limit: Optional[int] = None, type: int = DiaryType.PRIMOGEMS, month: Optional[int] = None, lang: Optional[str] = None) ‑> genshin.client.components.diary.DiaryPaginator</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new daily reward paginator.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is deprecated and will be removed in the following version.
You can use <code>genshin_diary_log</code> instead.</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@deprecation.deprecated(&#34;genshin_diary_log&#34;)
def diary_log(
    self,
    uid: typing.Optional[int] = None,
    *,
    limit: typing.Optional[int] = None,
    type: int = models.DiaryType.PRIMOGEMS,
    month: typing.Optional[int] = None,
    lang: typing.Optional[str] = None,
) -&gt; DiaryPaginator:
    &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
    return self.genshin_diary_log(
        uid=uid,
        limit=limit,
        type=type,
        month=month,
        lang=lang,
    )</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.genshin_diary_log"><code class="name flex">
<span>def <span class="ident">genshin_diary_log</span></span>(<span>self, uid: Optional[int] = None, *, limit: Optional[int] = None, type: int = DiaryType.PRIMOGEMS, month: Optional[int] = None, lang: Optional[str] = None) ‑> genshin.client.components.diary.DiaryPaginator</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new daily reward paginator.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def genshin_diary_log(
    self,
    uid: typing.Optional[int] = None,
    *,
    limit: typing.Optional[int] = None,
    type: int = models.DiaryType.PRIMOGEMS,
    month: typing.Optional[int] = None,
    lang: typing.Optional[str] = None,
) -&gt; DiaryPaginator:
    &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
    return DiaryPaginator(
        functools.partial(
            self._get_genshin_diary_page,
            uid=uid,
            type=type,
            month=month,
            lang=lang,
        ),
        limit=limit,
    )</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.get_diary"><code class="name flex">
<span>async def <span class="ident">get_diary</span></span>(<span>self, uid: Optional[int] = None, *, month: Optional[int] = None, lang: Optional[str] = None) ‑> <a title="genshin.models.genshin.diary.Diary" href="../../models/genshin/diary.html#genshin.models.genshin.diary.Diary">Diary</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a traveler's diary with earning details for the month.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is deprecated and will be removed in the following version.
You can use <code>get_genshin_diary</code> instead.</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@deprecation.deprecated(&#34;get_genshin_diary&#34;)
async def get_diary(
    self,
    uid: typing.Optional[int] = None,
    *,
    month: typing.Optional[int] = None,
    lang: typing.Optional[str] = None,
) -&gt; models.Diary:
    &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
    return await self.get_genshin_diary(uid, month=month, lang=lang)</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.get_genshin_diary"><code class="name flex">
<span>async def <span class="ident">get_genshin_diary</span></span>(<span>self, uid: Optional[int] = None, *, month: Optional[int] = None, lang: Optional[str] = None) ‑> <a title="genshin.models.genshin.diary.Diary" href="../../models/genshin/diary.html#genshin.models.genshin.diary.Diary">Diary</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a traveler's diary with earning details for the month.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def get_genshin_diary(
    self,
    uid: typing.Optional[int] = None,
    *,
    month: typing.Optional[int] = None,
    lang: typing.Optional[str] = None,
) -&gt; models.Diary:
    &#34;&#34;&#34;Get a traveler&#39;s diary with earning details for the month.&#34;&#34;&#34;
    game = types.Game.GENSHIN
    uid = uid or await self._get_uid(game)
    cache_key = cache.cache_key(
        &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
    )
    data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
    return models.Diary(**data)</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.get_starrail_diary"><code class="name flex">
<span>async def <span class="ident">get_starrail_diary</span></span>(<span>self, uid: Optional[int] = None, *, month: Optional[int] = None, lang: Optional[str] = None) ‑> <a title="genshin.models.genshin.diary.StarRailDiary" href="../../models/genshin/diary.html#genshin.models.genshin.diary.StarRailDiary">StarRailDiary</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a blazer's diary with earning details for the month.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def get_starrail_diary(
    self,
    uid: typing.Optional[int] = None,
    *,
    month: typing.Optional[int] = None,
    lang: typing.Optional[str] = None,
) -&gt; models.StarRailDiary:
    &#34;&#34;&#34;Get a blazer&#39;s diary with earning details for the month.&#34;&#34;&#34;
    game = types.Game.STARRAIL
    uid = uid or await self._get_uid(game)
    cache_key = cache.cache_key(
        &#34;diary&#34;, uid=uid, game=game, month=month or datetime.datetime.now(CN_TIMEZONE).month, lang=lang or self.lang
    )
    data = await self.request_ledger(uid, game=game, month=month, lang=lang, cache=cache_key)
    return models.StarRailDiary(**data)</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.request_ledger"><code class="name flex">
<span>async def <span class="ident">request_ledger</span></span>(<span>self, uid: Optional[int] = None, *, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, detail: bool = False, month: Union[int, str, ForwardRef(None)] = None, lang: Optional[str] = None, params: Optional[Mapping[str, Any]] = None, **kwargs: Any) ‑> Mapping[str, Any]</span>
</code></dt>
<dd>
<div class="desc"><p>Make a request towards the ys ledger endpoint.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@managers.no_multi
async def request_ledger(
    self,
    uid: typing.Optional[int] = None,
    *,
    game: typing.Optional[types.Game] = None,
    detail: bool = False,
    month: typing.Union[int, str, None] = None,
    lang: typing.Optional[str] = None,
    params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
    **kwargs: typing.Any,
) -&gt; typing.Mapping[str, typing.Any]:
    &#34;&#34;&#34;Make a request towards the ys ledger endpoint.&#34;&#34;&#34;
    # TODO: Do not separate urls?
    params = dict(params or {})

    if game is None:
        if self.default_game is None:
            raise RuntimeError(&#34;No default game set.&#34;)

        game = self.default_game

    base_url = routes.DETAIL_LEDGER_URL if detail else routes.INFO_LEDGER_URL
    url = base_url.get_url(self.region, game)

    uid = uid or await self._get_uid(game)

    if self.region == types.Region.OVERSEAS or game == types.Game.STARRAIL:
        params[&#34;uid&#34;] = uid
        params[&#34;region&#34;] = utility.recognize_server(uid, game)
    elif self.region == types.Region.CHINESE:
        params[&#34;bind_uid&#34;] = uid
        params[&#34;bind_region&#34;] = utility.recognize_server(uid, game)
    else:
        raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)
    params[&#34;month&#34;] = month or (
        datetime.datetime.now().strftime(&#34;%Y%m&#34;) if game == types.Game.STARRAIL else datetime.datetime.now().month
    )
    params[&#34;lang&#34;] = lang or self.lang

    return await self.request(url, params=params, **kwargs)</code></pre>
</details>
</dd>
<dt id="genshin.client.components.diary.DiaryClient.starrail_diary_log"><code class="name flex">
<span>def <span class="ident">starrail_diary_log</span></span>(<span>self, uid: Optional[int] = None, *, limit: Optional[int] = None, type: int = StarRailDiaryType.STELLARJADE, month: Optional[str] = None, lang: Optional[str] = None) ‑> genshin.client.components.diary.StarRailDiaryPaginator</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new daily reward paginator.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def starrail_diary_log(
    self,
    uid: typing.Optional[int] = None,
    *,
    limit: typing.Optional[int] = None,
    type: int = models.StarRailDiaryType.STELLARJADE,
    month: typing.Optional[str] = None,
    lang: typing.Optional[str] = None,
) -&gt; StarRailDiaryPaginator:
    &#34;&#34;&#34;Create a new daily reward paginator.&#34;&#34;&#34;
    return StarRailDiaryPaginator(
        functools.partial(
            self._get_starrail_diary_page,
            uid=uid,
            type=type,
            month=month,
            lang=lang,
        ),
        limit=limit,
    )</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="genshin.client.components.base.BaseClient" href="base.html#genshin.client.components.base.BaseClient">BaseClient</a></b></code>:
<ul class="hlist">
<li><code><a title="genshin.client.components.base.BaseClient.authkey" href="base.html#genshin.client.components.base.BaseClient.authkey">authkey</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.authkeys" href="base.html#genshin.client.components.base.BaseClient.authkeys">authkeys</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.cache" href="base.html#genshin.client.components.base.BaseClient.cache">cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.cookie_manager" href="base.html#genshin.client.components.base.BaseClient.cookie_manager">cookie_manager</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.debug" href="base.html#genshin.client.components.base.BaseClient.debug">debug</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.default_game" href="base.html#genshin.client.components.base.BaseClient.default_game">default_game</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.game" href="base.html#genshin.client.components.base.BaseClient.game">game</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.genshin_accounts" href="base.html#genshin.client.components.base.BaseClient.genshin_accounts">genshin_accounts</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.get_game_accounts" href="base.html#genshin.client.components.base.BaseClient.get_game_accounts">get_game_accounts</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.hoyolab_id" href="base.html#genshin.client.components.base.BaseClient.hoyolab_id">hoyolab_id</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.lang" href="base.html#genshin.client.components.base.BaseClient.lang">lang</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.proxy" href="base.html#genshin.client.components.base.BaseClient.proxy">proxy</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.region" href="base.html#genshin.client.components.base.BaseClient.region">region</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request" href="base.html#genshin.client.components.base.BaseClient.request">request</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_bbs" href="base.html#genshin.client.components.base.BaseClient.request_bbs">request_bbs</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_hoyolab" href="base.html#genshin.client.components.base.BaseClient.request_hoyolab">request_hoyolab</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_webstatic" href="base.html#genshin.client.components.base.BaseClient.request_webstatic">request_webstatic</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_authkey" href="base.html#genshin.client.components.base.BaseClient.set_authkey">set_authkey</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_browser_cookies" href="base.html#genshin.client.components.base.BaseClient.set_browser_cookies">set_browser_cookies</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_cache" href="base.html#genshin.client.components.base.BaseClient.set_cache">set_cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_cookies" href="base.html#genshin.client.components.base.BaseClient.set_cookies">set_cookies</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_redis_cache" href="base.html#genshin.client.components.base.BaseClient.set_redis_cache">set_redis_cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.uid" href="base.html#genshin.client.components.base.BaseClient.uid">uid</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.uids" href="base.html#genshin.client.components.base.BaseClient.uids">uids</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.update_mi18n" href="base.html#genshin.client.components.base.BaseClient.update_mi18n">update_mi18n</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="genshin.client.components" href="index.html">genshin.client.components</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="genshin.client.components.diary.DiaryClient" href="#genshin.client.components.diary.DiaryClient">DiaryClient</a></code></h4>
<ul class="two-column">
<li><code><a title="genshin.client.components.diary.DiaryClient.diary_log" href="#genshin.client.components.diary.DiaryClient.diary_log">diary_log</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.genshin_diary_log" href="#genshin.client.components.diary.DiaryClient.genshin_diary_log">genshin_diary_log</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.get_diary" href="#genshin.client.components.diary.DiaryClient.get_diary">get_diary</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.get_genshin_diary" href="#genshin.client.components.diary.DiaryClient.get_genshin_diary">get_genshin_diary</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.get_starrail_diary" href="#genshin.client.components.diary.DiaryClient.get_starrail_diary">get_starrail_diary</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.logger" href="#genshin.client.components.diary.DiaryClient.logger">logger</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.request_ledger" href="#genshin.client.components.diary.DiaryClient.request_ledger">request_ledger</a></code></li>
<li><code><a title="genshin.client.components.diary.DiaryClient.starrail_diary_log" href="#genshin.client.components.diary.DiaryClient.starrail_diary_log">starrail_diary_log</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>