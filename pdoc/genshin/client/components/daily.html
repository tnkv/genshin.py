<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>genshin.client.components.daily API documentation</title>
<meta name="description" content="Daily reward component." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>genshin.client.components.daily</code></h1>
</header>
<section id="section-intro">
<p>Daily reward component.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Daily reward component.&#34;&#34;&#34;

import asyncio
import datetime
import functools
import typing
import uuid

import aiohttp.typedefs

from genshin import constants, paginators, types, utility
from genshin.client import cache, routes
from genshin.client.components import base
from genshin.client.manager import managers
from genshin.models.genshin import daily as models
from genshin.utility import ds as ds_utility

__all__ = [&#34;DailyRewardClient&#34;]

CN_TIMEZONE = datetime.timezone(datetime.timedelta(hours=8))


class DailyRewardClient(base.BaseClient):
    &#34;&#34;&#34;Daily reward component.&#34;&#34;&#34;

    @managers.no_multi
    async def request_daily_reward(
        self,
        endpoint: str,
        *,
        game: typing.Optional[types.Game] = None,
        method: str = &#34;GET&#34;,
        lang: typing.Optional[str] = None,
        params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
        headers: typing.Optional[aiohttp.typedefs.LooseHeaders] = None,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
        **kwargs: typing.Any,
    ) -&gt; typing.Mapping[str, typing.Any]:
        &#34;&#34;&#34;Make a request towards the daily reward endpoint.&#34;&#34;&#34;
        params = dict(params or {})
        headers = dict(headers or {})

        if game is None:
            if self.default_game is None:
                raise RuntimeError(&#34;No default game set.&#34;)

            game = self.default_game

        base_url = routes.REWARD_URL.get_url(self.region, game)
        url = (base_url / endpoint).update_query(**base_url.query)

        if self.region == types.Region.OVERSEAS:
            params[&#34;lang&#34;] = lang or self.lang
            headers[&#34;referer&#34;] = &#34;https://act.hoyolab.com/&#34;

        elif self.region == types.Region.CHINESE:
            uid = await self._get_uid(game)

            params[&#34;uid&#34;] = uid
            params[&#34;region&#34;] = utility.recognize_server(uid, game)

            # most of the extra headers are likely just placebo
            headers[&#34;x-rpc-app_version&#34;] = &#34;2.34.1&#34;
            headers[&#34;x-rpc-client_type&#34;] = &#34;5&#34;
            headers[&#34;x-rpc-device_id&#34;] = str(uuid.uuid4())
            headers[&#34;x-rpc-sys_version&#34;] = &#34;12&#34;
            headers[&#34;x-rpc-platform&#34;] = &#34;android&#34;
            headers[&#34;x-rpc-channel&#34;] = &#34;miyousheluodi&#34;
            headers[&#34;x-rpc-device_model&#34;] = str(self.hoyolab_id) or &#34;&#34;
            headers[&#34;referer&#34;] = (
                &#34;https://webstatic.mihoyo.com/bbs/event/signin-ys/index.html?&#34;
                &#34;bbs_auth_required=true&amp;act_id=e202009291139501&amp;utm_source=bbs&amp;utm_medium=mys&amp;utm_campaign=icon&#34;
            )

            headers[&#34;ds&#34;] = ds_utility.generate_dynamic_secret(constants.DS_SALT[&#34;cn_signin&#34;])

        else:
            raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)

        if challenge:
            headers[&#34;x-rpc-challenge&#34;] = challenge[&#34;challenge&#34;]
            headers[&#34;x-rpc-seccode&#34;] = challenge[&#34;seccode&#34;]
            headers[&#34;x-rpc-validate&#34;] = challenge[&#34;validate&#34;]

        return await self.request(url, method=method, params=params, headers=headers, **kwargs)

    async def get_reward_info(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.DailyRewardInfo:
        &#34;&#34;&#34;Get the daily reward info for the current user.&#34;&#34;&#34;
        data = await self.request_daily_reward(&#34;info&#34;, game=game, lang=lang)
        return models.DailyRewardInfo(data[&#34;is_sign&#34;], data[&#34;total_sign_day&#34;])

    async def get_monthly_rewards(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; typing.Sequence[models.DailyReward]:
        &#34;&#34;&#34;Get a list of all availible rewards for the current month.&#34;&#34;&#34;
        data = await self.request_daily_reward(
            &#34;home&#34;,
            game=game,
            static_cache=cache.cache_key(
                &#34;rewards&#34;,
                month=datetime.datetime.now(CN_TIMEZONE).month,
                region=self.region,
                game=typing.cast(&#34;types.Game&#34;, game or self.default_game),  # (resolved later)
                lang=lang or self.lang,
            ),
        )
        return [models.DailyReward(**i) for i in data[&#34;awards&#34;]]

    async def _get_claimed_rewards_page(
        self,
        page: int,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; typing.Sequence[models.ClaimedDailyReward]:
        &#34;&#34;&#34;Get a single page of claimed rewards for the current user.&#34;&#34;&#34;
        data = await self.request_daily_reward(&#34;award&#34;, params=dict(current_page=page), game=game, lang=lang)
        return [models.ClaimedDailyReward(**i) for i in data[&#34;list&#34;]]

    def claimed_rewards(
        self,
        *,
        limit: typing.Optional[int] = None,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; paginators.Paginator[models.ClaimedDailyReward]:
        &#34;&#34;&#34;Get all claimed rewards for the current user.&#34;&#34;&#34;
        return paginators.PagedPaginator(
            functools.partial(
                self._get_claimed_rewards_page,
                game=game,
                lang=lang,
            ),
            limit=limit,
            page_size=10,
        )

    @typing.overload
    async def claim_daily_reward(  # noqa: D102 missing docstring in overload?
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: typing.Literal[True] = ...,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; models.DailyReward: ...

    @typing.overload
    async def claim_daily_reward(  # noqa: D102 missing docstring in overload?
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: typing.Literal[False],
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; None: ...

    async def claim_daily_reward(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: bool = True,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; typing.Optional[models.DailyReward]:
        &#34;&#34;&#34;Signs into hoyolab and claims the daily reward.&#34;&#34;&#34;
        await self.request_daily_reward(&#34;sign&#34;, method=&#34;POST&#34;, game=game, lang=lang, challenge=challenge)

        if not reward:
            return None

        info, rewards = await asyncio.gather(
            self.get_reward_info(game=game, lang=lang),
            self.get_monthly_rewards(game=game, lang=lang),
        )
        return rewards[info.claimed_rewards - 1]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="genshin.client.components.daily.DailyRewardClient"><code class="flex name class">
<span>class <span class="ident">DailyRewardClient</span></span>
<span>(</span><span>cookies: Union[ForwardRef('http.cookies.BaseCookie[Any]'), Mapping[Any, Any], str, Sequence[Union[ForwardRef('http.cookies.BaseCookie[Any]'), Mapping[Any, Any], str]], ForwardRef(None)] = None, *, authkey: Optional[str] = None, lang: str = 'en-us', region: <a title="genshin.types.Region" href="../../types.html#genshin.types.Region">Region</a> = Region.OVERSEAS, proxy: Optional[str] = None, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, uid: Optional[int] = None, hoyolab_id: Optional[int] = None, cache: Optional[<a title="genshin.client.cache.Cache" href="../cache.html#genshin.client.cache.Cache">Cache</a>] = None, debug: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Daily reward component.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DailyRewardClient(base.BaseClient):
    &#34;&#34;&#34;Daily reward component.&#34;&#34;&#34;

    @managers.no_multi
    async def request_daily_reward(
        self,
        endpoint: str,
        *,
        game: typing.Optional[types.Game] = None,
        method: str = &#34;GET&#34;,
        lang: typing.Optional[str] = None,
        params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
        headers: typing.Optional[aiohttp.typedefs.LooseHeaders] = None,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
        **kwargs: typing.Any,
    ) -&gt; typing.Mapping[str, typing.Any]:
        &#34;&#34;&#34;Make a request towards the daily reward endpoint.&#34;&#34;&#34;
        params = dict(params or {})
        headers = dict(headers or {})

        if game is None:
            if self.default_game is None:
                raise RuntimeError(&#34;No default game set.&#34;)

            game = self.default_game

        base_url = routes.REWARD_URL.get_url(self.region, game)
        url = (base_url / endpoint).update_query(**base_url.query)

        if self.region == types.Region.OVERSEAS:
            params[&#34;lang&#34;] = lang or self.lang
            headers[&#34;referer&#34;] = &#34;https://act.hoyolab.com/&#34;

        elif self.region == types.Region.CHINESE:
            uid = await self._get_uid(game)

            params[&#34;uid&#34;] = uid
            params[&#34;region&#34;] = utility.recognize_server(uid, game)

            # most of the extra headers are likely just placebo
            headers[&#34;x-rpc-app_version&#34;] = &#34;2.34.1&#34;
            headers[&#34;x-rpc-client_type&#34;] = &#34;5&#34;
            headers[&#34;x-rpc-device_id&#34;] = str(uuid.uuid4())
            headers[&#34;x-rpc-sys_version&#34;] = &#34;12&#34;
            headers[&#34;x-rpc-platform&#34;] = &#34;android&#34;
            headers[&#34;x-rpc-channel&#34;] = &#34;miyousheluodi&#34;
            headers[&#34;x-rpc-device_model&#34;] = str(self.hoyolab_id) or &#34;&#34;
            headers[&#34;referer&#34;] = (
                &#34;https://webstatic.mihoyo.com/bbs/event/signin-ys/index.html?&#34;
                &#34;bbs_auth_required=true&amp;act_id=e202009291139501&amp;utm_source=bbs&amp;utm_medium=mys&amp;utm_campaign=icon&#34;
            )

            headers[&#34;ds&#34;] = ds_utility.generate_dynamic_secret(constants.DS_SALT[&#34;cn_signin&#34;])

        else:
            raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)

        if challenge:
            headers[&#34;x-rpc-challenge&#34;] = challenge[&#34;challenge&#34;]
            headers[&#34;x-rpc-seccode&#34;] = challenge[&#34;seccode&#34;]
            headers[&#34;x-rpc-validate&#34;] = challenge[&#34;validate&#34;]

        return await self.request(url, method=method, params=params, headers=headers, **kwargs)

    async def get_reward_info(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; models.DailyRewardInfo:
        &#34;&#34;&#34;Get the daily reward info for the current user.&#34;&#34;&#34;
        data = await self.request_daily_reward(&#34;info&#34;, game=game, lang=lang)
        return models.DailyRewardInfo(data[&#34;is_sign&#34;], data[&#34;total_sign_day&#34;])

    async def get_monthly_rewards(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; typing.Sequence[models.DailyReward]:
        &#34;&#34;&#34;Get a list of all availible rewards for the current month.&#34;&#34;&#34;
        data = await self.request_daily_reward(
            &#34;home&#34;,
            game=game,
            static_cache=cache.cache_key(
                &#34;rewards&#34;,
                month=datetime.datetime.now(CN_TIMEZONE).month,
                region=self.region,
                game=typing.cast(&#34;types.Game&#34;, game or self.default_game),  # (resolved later)
                lang=lang or self.lang,
            ),
        )
        return [models.DailyReward(**i) for i in data[&#34;awards&#34;]]

    async def _get_claimed_rewards_page(
        self,
        page: int,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; typing.Sequence[models.ClaimedDailyReward]:
        &#34;&#34;&#34;Get a single page of claimed rewards for the current user.&#34;&#34;&#34;
        data = await self.request_daily_reward(&#34;award&#34;, params=dict(current_page=page), game=game, lang=lang)
        return [models.ClaimedDailyReward(**i) for i in data[&#34;list&#34;]]

    def claimed_rewards(
        self,
        *,
        limit: typing.Optional[int] = None,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
    ) -&gt; paginators.Paginator[models.ClaimedDailyReward]:
        &#34;&#34;&#34;Get all claimed rewards for the current user.&#34;&#34;&#34;
        return paginators.PagedPaginator(
            functools.partial(
                self._get_claimed_rewards_page,
                game=game,
                lang=lang,
            ),
            limit=limit,
            page_size=10,
        )

    @typing.overload
    async def claim_daily_reward(  # noqa: D102 missing docstring in overload?
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: typing.Literal[True] = ...,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; models.DailyReward: ...

    @typing.overload
    async def claim_daily_reward(  # noqa: D102 missing docstring in overload?
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: typing.Literal[False],
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; None: ...

    async def claim_daily_reward(
        self,
        *,
        game: typing.Optional[types.Game] = None,
        lang: typing.Optional[str] = None,
        reward: bool = True,
        challenge: typing.Optional[typing.Mapping[str, str]] = None,
    ) -&gt; typing.Optional[models.DailyReward]:
        &#34;&#34;&#34;Signs into hoyolab and claims the daily reward.&#34;&#34;&#34;
        await self.request_daily_reward(&#34;sign&#34;, method=&#34;POST&#34;, game=game, lang=lang, challenge=challenge)

        if not reward:
            return None

        info, rewards = await asyncio.gather(
            self.get_reward_info(game=game, lang=lang),
            self.get_monthly_rewards(game=game, lang=lang),
        )
        return rewards[info.claimed_rewards - 1]</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="genshin.client.components.base.BaseClient" href="base.html#genshin.client.components.base.BaseClient">BaseClient</a></li>
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="genshin.client.clients.Client" href="../clients.html#genshin.client.clients.Client">Client</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="genshin.client.components.daily.DailyRewardClient.logger"><code class="name">var <span class="ident">logger</span> : logging.Logger</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="genshin.client.components.daily.DailyRewardClient.claim_daily_reward"><code class="name flex">
<span>async def <span class="ident">claim_daily_reward</span></span>(<span>self, *, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, lang: Optional[str] = None, reward: bool = True, challenge: Optional[Mapping[str, str]] = None) ‑> Optional[<a title="genshin.models.genshin.daily.DailyReward" href="../../models/genshin/daily.html#genshin.models.genshin.daily.DailyReward">DailyReward</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Signs into hoyolab and claims the daily reward.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def claim_daily_reward(
    self,
    *,
    game: typing.Optional[types.Game] = None,
    lang: typing.Optional[str] = None,
    reward: bool = True,
    challenge: typing.Optional[typing.Mapping[str, str]] = None,
) -&gt; typing.Optional[models.DailyReward]:
    &#34;&#34;&#34;Signs into hoyolab and claims the daily reward.&#34;&#34;&#34;
    await self.request_daily_reward(&#34;sign&#34;, method=&#34;POST&#34;, game=game, lang=lang, challenge=challenge)

    if not reward:
        return None

    info, rewards = await asyncio.gather(
        self.get_reward_info(game=game, lang=lang),
        self.get_monthly_rewards(game=game, lang=lang),
    )
    return rewards[info.claimed_rewards - 1]</code></pre>
</details>
</dd>
<dt id="genshin.client.components.daily.DailyRewardClient.claimed_rewards"><code class="name flex">
<span>def <span class="ident">claimed_rewards</span></span>(<span>self, *, limit: Optional[int] = None, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, lang: Optional[str] = None) ‑> <a title="genshin.paginators.base.Paginator" href="../../paginators/base.html#genshin.paginators.base.Paginator">Paginator</a>[<a title="genshin.models.genshin.daily.ClaimedDailyReward" href="../../models/genshin/daily.html#genshin.models.genshin.daily.ClaimedDailyReward">ClaimedDailyReward</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Get all claimed rewards for the current user.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def claimed_rewards(
    self,
    *,
    limit: typing.Optional[int] = None,
    game: typing.Optional[types.Game] = None,
    lang: typing.Optional[str] = None,
) -&gt; paginators.Paginator[models.ClaimedDailyReward]:
    &#34;&#34;&#34;Get all claimed rewards for the current user.&#34;&#34;&#34;
    return paginators.PagedPaginator(
        functools.partial(
            self._get_claimed_rewards_page,
            game=game,
            lang=lang,
        ),
        limit=limit,
        page_size=10,
    )</code></pre>
</details>
</dd>
<dt id="genshin.client.components.daily.DailyRewardClient.get_monthly_rewards"><code class="name flex">
<span>async def <span class="ident">get_monthly_rewards</span></span>(<span>self, *, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, lang: Optional[str] = None) ‑> Sequence[<a title="genshin.models.genshin.daily.DailyReward" href="../../models/genshin/daily.html#genshin.models.genshin.daily.DailyReward">DailyReward</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Get a list of all availible rewards for the current month.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def get_monthly_rewards(
    self,
    *,
    game: typing.Optional[types.Game] = None,
    lang: typing.Optional[str] = None,
) -&gt; typing.Sequence[models.DailyReward]:
    &#34;&#34;&#34;Get a list of all availible rewards for the current month.&#34;&#34;&#34;
    data = await self.request_daily_reward(
        &#34;home&#34;,
        game=game,
        static_cache=cache.cache_key(
            &#34;rewards&#34;,
            month=datetime.datetime.now(CN_TIMEZONE).month,
            region=self.region,
            game=typing.cast(&#34;types.Game&#34;, game or self.default_game),  # (resolved later)
            lang=lang or self.lang,
        ),
    )
    return [models.DailyReward(**i) for i in data[&#34;awards&#34;]]</code></pre>
</details>
</dd>
<dt id="genshin.client.components.daily.DailyRewardClient.get_reward_info"><code class="name flex">
<span>async def <span class="ident">get_reward_info</span></span>(<span>self, *, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, lang: Optional[str] = None) ‑> <a title="genshin.models.genshin.daily.DailyRewardInfo" href="../../models/genshin/daily.html#genshin.models.genshin.daily.DailyRewardInfo">DailyRewardInfo</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get the daily reward info for the current user.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def get_reward_info(
    self,
    *,
    game: typing.Optional[types.Game] = None,
    lang: typing.Optional[str] = None,
) -&gt; models.DailyRewardInfo:
    &#34;&#34;&#34;Get the daily reward info for the current user.&#34;&#34;&#34;
    data = await self.request_daily_reward(&#34;info&#34;, game=game, lang=lang)
    return models.DailyRewardInfo(data[&#34;is_sign&#34;], data[&#34;total_sign_day&#34;])</code></pre>
</details>
</dd>
<dt id="genshin.client.components.daily.DailyRewardClient.request_daily_reward"><code class="name flex">
<span>async def <span class="ident">request_daily_reward</span></span>(<span>self, endpoint: str, *, game: Optional[<a title="genshin.types.Game" href="../../types.html#genshin.types.Game">Game</a>] = None, method: str = 'GET', lang: Optional[str] = None, params: Optional[Mapping[str, Any]] = None, headers: Union[Mapping[Union[str, multidict._multidict.istr], str], multidict._multidict.CIMultiDict, multidict._multidict.CIMultiDictProxy, ForwardRef(None)] = None, challenge: Optional[Mapping[str, str]] = None, **kwargs: Any) ‑> Mapping[str, Any]</span>
</code></dt>
<dd>
<div class="desc"><p>Make a request towards the daily reward endpoint.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@managers.no_multi
async def request_daily_reward(
    self,
    endpoint: str,
    *,
    game: typing.Optional[types.Game] = None,
    method: str = &#34;GET&#34;,
    lang: typing.Optional[str] = None,
    params: typing.Optional[typing.Mapping[str, typing.Any]] = None,
    headers: typing.Optional[aiohttp.typedefs.LooseHeaders] = None,
    challenge: typing.Optional[typing.Mapping[str, str]] = None,
    **kwargs: typing.Any,
) -&gt; typing.Mapping[str, typing.Any]:
    &#34;&#34;&#34;Make a request towards the daily reward endpoint.&#34;&#34;&#34;
    params = dict(params or {})
    headers = dict(headers or {})

    if game is None:
        if self.default_game is None:
            raise RuntimeError(&#34;No default game set.&#34;)

        game = self.default_game

    base_url = routes.REWARD_URL.get_url(self.region, game)
    url = (base_url / endpoint).update_query(**base_url.query)

    if self.region == types.Region.OVERSEAS:
        params[&#34;lang&#34;] = lang or self.lang
        headers[&#34;referer&#34;] = &#34;https://act.hoyolab.com/&#34;

    elif self.region == types.Region.CHINESE:
        uid = await self._get_uid(game)

        params[&#34;uid&#34;] = uid
        params[&#34;region&#34;] = utility.recognize_server(uid, game)

        # most of the extra headers are likely just placebo
        headers[&#34;x-rpc-app_version&#34;] = &#34;2.34.1&#34;
        headers[&#34;x-rpc-client_type&#34;] = &#34;5&#34;
        headers[&#34;x-rpc-device_id&#34;] = str(uuid.uuid4())
        headers[&#34;x-rpc-sys_version&#34;] = &#34;12&#34;
        headers[&#34;x-rpc-platform&#34;] = &#34;android&#34;
        headers[&#34;x-rpc-channel&#34;] = &#34;miyousheluodi&#34;
        headers[&#34;x-rpc-device_model&#34;] = str(self.hoyolab_id) or &#34;&#34;
        headers[&#34;referer&#34;] = (
            &#34;https://webstatic.mihoyo.com/bbs/event/signin-ys/index.html?&#34;
            &#34;bbs_auth_required=true&amp;act_id=e202009291139501&amp;utm_source=bbs&amp;utm_medium=mys&amp;utm_campaign=icon&#34;
        )

        headers[&#34;ds&#34;] = ds_utility.generate_dynamic_secret(constants.DS_SALT[&#34;cn_signin&#34;])

    else:
        raise TypeError(f&#34;{self.region!r} is not a valid region.&#34;)

    if challenge:
        headers[&#34;x-rpc-challenge&#34;] = challenge[&#34;challenge&#34;]
        headers[&#34;x-rpc-seccode&#34;] = challenge[&#34;seccode&#34;]
        headers[&#34;x-rpc-validate&#34;] = challenge[&#34;validate&#34;]

    return await self.request(url, method=method, params=params, headers=headers, **kwargs)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="genshin.client.components.base.BaseClient" href="base.html#genshin.client.components.base.BaseClient">BaseClient</a></b></code>:
<ul class="hlist">
<li><code><a title="genshin.client.components.base.BaseClient.authkey" href="base.html#genshin.client.components.base.BaseClient.authkey">authkey</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.authkeys" href="base.html#genshin.client.components.base.BaseClient.authkeys">authkeys</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.cache" href="base.html#genshin.client.components.base.BaseClient.cache">cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.cookie_manager" href="base.html#genshin.client.components.base.BaseClient.cookie_manager">cookie_manager</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.debug" href="base.html#genshin.client.components.base.BaseClient.debug">debug</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.default_game" href="base.html#genshin.client.components.base.BaseClient.default_game">default_game</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.game" href="base.html#genshin.client.components.base.BaseClient.game">game</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.genshin_accounts" href="base.html#genshin.client.components.base.BaseClient.genshin_accounts">genshin_accounts</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.get_game_accounts" href="base.html#genshin.client.components.base.BaseClient.get_game_accounts">get_game_accounts</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.hoyolab_id" href="base.html#genshin.client.components.base.BaseClient.hoyolab_id">hoyolab_id</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.lang" href="base.html#genshin.client.components.base.BaseClient.lang">lang</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.proxy" href="base.html#genshin.client.components.base.BaseClient.proxy">proxy</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.region" href="base.html#genshin.client.components.base.BaseClient.region">region</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request" href="base.html#genshin.client.components.base.BaseClient.request">request</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_bbs" href="base.html#genshin.client.components.base.BaseClient.request_bbs">request_bbs</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_hoyolab" href="base.html#genshin.client.components.base.BaseClient.request_hoyolab">request_hoyolab</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.request_webstatic" href="base.html#genshin.client.components.base.BaseClient.request_webstatic">request_webstatic</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_authkey" href="base.html#genshin.client.components.base.BaseClient.set_authkey">set_authkey</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_browser_cookies" href="base.html#genshin.client.components.base.BaseClient.set_browser_cookies">set_browser_cookies</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_cache" href="base.html#genshin.client.components.base.BaseClient.set_cache">set_cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_cookies" href="base.html#genshin.client.components.base.BaseClient.set_cookies">set_cookies</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.set_redis_cache" href="base.html#genshin.client.components.base.BaseClient.set_redis_cache">set_redis_cache</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.uid" href="base.html#genshin.client.components.base.BaseClient.uid">uid</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.uids" href="base.html#genshin.client.components.base.BaseClient.uids">uids</a></code></li>
<li><code><a title="genshin.client.components.base.BaseClient.update_mi18n" href="base.html#genshin.client.components.base.BaseClient.update_mi18n">update_mi18n</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="genshin.client.components" href="index.html">genshin.client.components</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="genshin.client.components.daily.DailyRewardClient" href="#genshin.client.components.daily.DailyRewardClient">DailyRewardClient</a></code></h4>
<ul class="">
<li><code><a title="genshin.client.components.daily.DailyRewardClient.claim_daily_reward" href="#genshin.client.components.daily.DailyRewardClient.claim_daily_reward">claim_daily_reward</a></code></li>
<li><code><a title="genshin.client.components.daily.DailyRewardClient.claimed_rewards" href="#genshin.client.components.daily.DailyRewardClient.claimed_rewards">claimed_rewards</a></code></li>
<li><code><a title="genshin.client.components.daily.DailyRewardClient.get_monthly_rewards" href="#genshin.client.components.daily.DailyRewardClient.get_monthly_rewards">get_monthly_rewards</a></code></li>
<li><code><a title="genshin.client.components.daily.DailyRewardClient.get_reward_info" href="#genshin.client.components.daily.DailyRewardClient.get_reward_info">get_reward_info</a></code></li>
<li><code><a title="genshin.client.components.daily.DailyRewardClient.logger" href="#genshin.client.components.daily.DailyRewardClient.logger">logger</a></code></li>
<li><code><a title="genshin.client.components.daily.DailyRewardClient.request_daily_reward" href="#genshin.client.components.daily.DailyRewardClient.request_daily_reward">request_daily_reward</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>